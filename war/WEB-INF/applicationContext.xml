<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<!-- Performance analysis using AOP -->
	<!--import resource="performanceAnalysis.xml"/-->
	
	<!-- Normal injection of services w/o performance analysis -->
	<import resource="gbServices.xml" />
	
	<import resource="db.xml" />
		
	<import resource="rest.xml" />
	
	<bean id="org.sakaiproject.gradebook.gwt.sakai.BusinessLogic" class="org.sakaiproject.gradebook.gwt.sakai.BusinessLogicImpl">
		<property name="gbService" ref="org.sakaiproject.gradebook.gwt.sakai.GradebookToolService"/> 
	</bean>
		
	<bean id="org.sakaiproject.gradebook.gwt.sakai.Gradebook2Authn" class="org.sakaiproject.gradebook.gwt.sakai.Gradebook2AuthnImpl">
	</bean>

	<bean id="org.sakaiproject.gradebook.gwt.sakai.Gradebook2Authz" class="org.sakaiproject.gradebook.gwt.sakai.Gradebook2AuthzImpl">
		<property name="authn" ref="org.sakaiproject.gradebook.gwt.sakai.Gradebook2Authn"/>
		<property name="sectionAwareness" ref="org.sakaiproject.section.api.SectionAwareness"/>
		<property name="gbToolService" ref="org.sakaiproject.gradebook.gwt.sakai.GradebookToolService"/>
		<property name="toolManager" ref="org.sakaiproject.tool.api.ToolManager"/>
		<property name="securityService" ref="org.sakaiproject.authz.api.SecurityService"/>
		<property name="siteService" ref="org.sakaiproject.site.api.SiteService"/>
	</bean>
	
	<bean id="org.sakaiproject.gradebook.gwt.server.ImportExportUtility" class="org.sakaiproject.gradebook.gwt.server.ImportExportUtilityImpl">
		<property name="gradeCalculations" ref="org.sakaiproject.gradebook.gwt.sakai.GradeCalculations"/>
	</bean>

	<bean id="GradebookImportService" class="org.sakaiproject.gradebook.gwt.sakai.GradebookImportController">
		<property name="gbToolService" ref="org.sakaiproject.gradebook.gwt.sakai.GradebookToolService"/>
		<property name="service" ref="org.sakaiproject.gradebook.gwt.sakai.Gradebook2ComponentService"/>
		<property name="commandClass" value="org.sakaiproject.gradebook.gwt.sakai.FileUploadBean"/>
		<property name="importExportUtility" ref="org.sakaiproject.gradebook.gwt.server.ImportExportUtility"/>
	</bean>
	
	
	<!--
	
	GRBK-37 : Sample Institutional Advisor 
	The Institutional Advisor is configured via the sakai.properties file.
	The sakai.properties file sets the "advisor@org.sakaiproject.gradebook.gwt.sakai.Gradebook2Service" property
	which then is injected via Sakai's bean configuration mechanism
	-->
	<bean id="org.sakaiproject.gradebook.gwt.sakai.api.SampleInstitutionalAdvisor" class="org.sakaiproject.gradebook.gwt.sakai.SampleInstitutionalAdvisor">
		<property name="toolManager" ref="org.sakaiproject.tool.api.ToolManager"/>
		<property name="siteService" ref="org.sakaiproject.site.api.SiteService"/>
		<property name="finalGradeSubmissionPath" value="/tmp"/>
	</bean>
	
	
	<bean id="org.sakaiproject.gradebook.gwt.sakai.GradeCalculations"
		class="org.sakaiproject.gradebook.gwt.sakai.calculations2.GradeCalculationsImpl"
		init-method="init">
		
		<property name="letterGradeMap">
			<map>
			  	<entry><key><value>A+</value></key><value>98.3333333333</value></entry>
			  	<entry><key><value>A</value></key><value>95</value></entry>
			  	<entry><key><value>A-</value></key><value>91.6666666666</value></entry>
			  	<entry><key><value>B+</value></key><value>88.3333333333</value></entry>
			  	<entry><key><value>B</value></key><value>85</value></entry>
			  	<entry><key><value>B-</value></key><value>81.6666666666</value></entry>
			  	<entry><key><value>C+</value></key><value>78.3333333333</value></entry>
			  	<entry><key><value>C</value></key><value>75</value></entry>
			  	<entry><key><value>C-</value></key><value>71.6666666666</value></entry>
			  	<entry><key><value>D+</value></key><value>68.3333333333</value></entry>
			  	<entry><key><value>D</value></key><value>65</value></entry>
			  	<entry><key><value>D-</value></key><value>61.6666666666</value></entry>
			  	<entry><key><value>F</value></key><value>58.3333333333</value></entry>
				<entry><key><value>0</value></key><value>0</value></entry>
			</map>
		</property>
		<property name="scale" value="50"/>
		
	</bean>

	
	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/>
	


</beans>
